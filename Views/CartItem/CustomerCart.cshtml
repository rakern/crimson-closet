@model IEnumerable<crimson_closet.Models.CartItem>

@{
    ViewData["Title"] = "CustomerCart";
    Layout = "~/Views/Shared/_LayoutUA.cshtml";
}

<div class="breadcrumb-wrapper">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 col-xs-12">
                <h1 class="breadcrumb-page-title">Your Cart</h1>
            </div> <!-- .col-md-6 -->
            <div class="col-md-6 col-sm-6 col-xs-12">
                <ol class="breadcrumb">
                    <li><a asp-controller="Home" asp-action="Index">Home</a></li>
                    <li><a asp-controller="Items" asp-action="Index">Closet</a></li>
                    <li>Cart</li>
                </ol>
            </div> <!-- .col-md-6 -->
        </div> <!-- .row -->
    </div> <!-- .container -->
</div> <!-- .breadcrumb-wrapper -->
<section>

    <div class="container">
        <div class="d-flex flex-row justify-content-end mb-5 mt-5">
            <a asp-action="Create" class="btn btn-secondary">Create New</a>
            <button class="btn btn-crimson margin-left-10" data-toggle="modal" data-target=".modal-small">
                Checkout
            </button>
        </div>

        <!--Model for "are you sure you want to checkout?"-->
        <div class="modal fade modal-small" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    

                    <div class="modal-body">
                        <h4>Are you sure you want to checkout?</h4>
                    </div> <!-- .modal-body -->

                    <div class="modal-footer">
                        <button type="button" class="btn btn-ar btn-secondary" data-dismiss="modal">No</button>
                        <a asp-controller="CartItem" asp-action="NoCartPage" class="btn btn-ar btn-crimson">Yes, Checkout</a>
                    </div> <!-- .modal-footer -->
                </div> <!-- .modal-content -->
            </div> <!-- .modal-dialog -->
        </div> <!-- .modal -->

        <div class="row">
            @foreach (var item in Model)
            {
                var parms = new Dictionary<string, string>();
                parms.Add("CartItemId", item.Id.ToString());
                <div class="col-md-6 col-lg-4">
                    <div class="thumbnail">
                        @if (item.Item.ItemPhoto != null)
                        {
                            var base64 = Convert.ToBase64String(item.Item.ItemPhoto);
                            var imgSrc = string.Format("data:image/jpg;base64,{0}", base64);
                            <img src="@imgSrc" class="card-image" />

                            //<img width="100" height="100" src="@Url.Action("GetActorPhoto", "Actors", new {item.ActorId})" />
                        }
                        else
                        {
                            <img src="~/img/ua-square-logo.png" class="card-image" alt="">

                        }

                        <div class="caption  text-center card-text">
                            <h3>@Html.DisplayFor(modelItem => item.Item.ItemBrand): @Html.DisplayFor(modelItem => item.Item.ItemType.ItemDescription)</h3>
                            <h6>Size: @Html.DisplayFor(modelItem => item.Item.ItemSize)</h6>
                            <h6>Color: @Html.DisplayFor(modelItem => item.Item.ItemColor)</h6>
                            <h6>Item Code: @Html.DisplayFor(modelItem => item.Item.ItemCode)</h6>
                            <form asp-action="Delete">
                                <input asp-controller="CartItem" asp-action="Delete" asp-all-route-data="parms" type="submit" value="Delete" class="btn btn-crimson" />
                            </form>
                        </div> <!-- .caption -->
                    </div>
                </div>
            }
        </div>
    </div>
</section>
